---
description: Vector v0.4.0 release notes: 9 new features, 43 enhancements, 12 bug fixes.
---

# v0.4.0 Release Notes

![Vector v0.4.0 release][images.v0.4.0]

---

* [**Changes**](#changes) - [since v0.3.0](https://github.com/timberio/vector/compare/v0.3.0...v0.4.0)
  * [**9 new features**](#new-features) - [3 sink](#new-sinks), [3 source](#new-sources), [3 transform](#new-transforms)
  * [**43 enhancements**](#enhancements) - [13 core](#core-enhancements), [17 sink](#sink-enhancements), [6 source](#source-enhancements), [7 transform](#transform-enhancements)
  * [**1 performance improvement**](#performance-improvements) - [1 core](#core-performance-improvements)
  * [**12 bug fixes**](#bug-fixes) - [8 core](#core-bug-fixes), [4 sink](#sink-bug-fixes)
* [**Updating**](#updating)-  [download][url.v0-4-0]
* [**Contributors**](#contributors)
* [**Community**][url.community] - [chat/forum][url.vector_chat], [mailing list][url.mailing_list]
* [**Roadmap**][url.roadmap] - [vote on new features][url.vote_feature]

---

## Changes

### New Features

#### New sinks

* New [`clickhouse` sink][docs.clickhouse_sink] ([#693][url.pr_693])
* New [`aws_cloudwatch_metrics` sink][docs.aws_cloudwatch_metrics_sink] ([#707][url.pr_707])
* New [`file` sink][docs.file_sink] ([#688][url.pr_688])

#### New sources

* New [`kafka` source][docs.kafka_source] ([#774][url.pr_774])
* New [`journald` source][docs.journald_source] ([#702][url.pr_702])
* New [`udp` source][docs.udp_source] ([#738][url.pr_738])

#### New transforms

* New [`add_tags` transform][docs.add_tags_transform] ([#785][url.pr_785])
* New [`remove_tags` transform][docs.remove_tags_transform] ([#785][url.pr_785])
* New [`coercer` transform][docs.coercer_transform] ([#666][url.pr_666])

### Enhancements

#### Core enhancements

* *cli*: Add `--color` option and tty check for ansi colors ([#623][url.pr_623])
* *[config][docs.configuration]*: Validation of sinks and sources for non-emptiness. ([#739][url.pr_739])
* *[config][docs.configuration]*: Improve configuration validation and make it more strict ([#552][url.pr_552])
* *[config][docs.configuration]*: Reusable templating system for event values ([#656][url.pr_656])
* *[metric data model][docs.metric]*: Add tags into metrics model ([#754][url.pr_754])
* *[metric data model][docs.metric]*: Add timestamps into metrics ([#726][url.pr_726])
* *[metric data model][docs.metric]*: Use floats for metrics values ([#553][url.pr_553])
* *[observability][docs.monitoring]*: Initial rate limit subscriber ([#494][url.pr_494])
* *[observability][docs.monitoring]*: Add rate limit notice when it starts ([#696][url.pr_696])
* *operations*: Build for x86_64-unknown-linux-musl with all features and optimized binary size ([#689][url.pr_689])
* *operations*: Add `jemallocator` feature flag ([#653][url.pr_653])
* *topology*: Add sink healthcheck disable ([#731][url.pr_731])
* *topology*: Adjust transform trait for multiple output events ([fe7f2b5][url.commit_fe7f2b503443199a65a79dad129ed89ace3e287a])

#### Sink enhancements

* *[`aws_cloudwatch_logs` sink][docs.aws_cloudwatch_logs_sink]*: Add retry ability to cloudwatch ([#663][url.pr_663])
* *[`aws_cloudwatch_logs` sink][docs.aws_cloudwatch_logs_sink]*: Add dynamic group creation ([#759][url.pr_759])
* *[`aws_cloudwatch_logs` sink][docs.aws_cloudwatch_logs_sink]*: Add cloudwatch partitioning and refactor partition buffer ([#519][url.pr_519])
* *[`aws_kinesis_streams` sink][docs.aws_kinesis_streams_sink]*: Add configurable partition keys ([#692][url.pr_692])
* *[`aws_s3` sink][docs.aws_s3_sink]*: Add filename extension option and fix trailing slash ([#596][url.pr_596])
* *[`console` sink][docs.console_sink]*: Accept both logs and metrics ([#631][url.pr_631])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Use templates for es index and s3 key prefix ([#686][url.pr_686])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Add support for custom query parameters ([#766][url.pr_766])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Default `doc_type` to `_doc` and make it op… ([#695][url.pr_695])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Add http basic authorization ([#749][url.pr_749])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Add support for additional headers to the elasticsearch sink ([#758][url.pr_758])
* *[`http` sink][docs.http_sink]*: Add support for unverified https ([#815][url.pr_815])
* *[`prometheus` sink][docs.prometheus_sink]*: Add namespace config ([#782][url.pr_782])
* *[`prometheus` sink][docs.prometheus_sink]*: Add labels support ([#773][url.pr_773])
* *[`prometheus` sink][docs.prometheus_sink]*: Support histograms ([#675][url.pr_675])
* *[`prometheus` sink][docs.prometheus_sink]*: Support sets ([#733][url.pr_733])
* *[`tcp` sink][docs.tcp_sink]*: Add support for tls ([#765][url.pr_765])

#### Source enhancements

* *[`file` source][docs.file_source]*: Add file checkpoint feature. ([#609][url.pr_609])
* *[`file` source][docs.file_source]*: Make fingerprinting strategy configurable ([#780][url.pr_780])
* *[`file` source][docs.file_source]*: Fall back to global data_dir option (#644) ([#673][url.pr_673])
* *[`file` source][docs.file_source]*: Favor older files and allow configuring greedier reads ([#810][url.pr_810])
* *[`file` source][docs.file_source]*: Allow aggregating multiple lines into one event ([#809][url.pr_809])
* *[`journald` source][docs.journald_source]*: Add checkpointing support ([#816][url.pr_816])

#### Transform enhancements

* *[`grok_parser` transform][docs.grok_parser_transform]*: Add type coercion ([#632][url.pr_632])
* *[`log_to_metric` transform][docs.log_to_metric_transform]*: Push histogram and set metrics from logs ([#650][url.pr_650])
* *[`log_to_metric` transform][docs.log_to_metric_transform]*: Output multiple metrics from a single log ([d8eadb0][url.commit_d8eadb08f469e7e411138ed9ff9e318bd4f9954c])
* *[`log_to_metric` transform][docs.log_to_metric_transform]*: Use templates for metric names in log_to_metric ([#668][url.pr_668])
* *[`lua` transform][docs.lua_transform]*: Add tags support to log_to_metric transform ([#786][url.pr_786])
* *[`regex_parser` transform][docs.regex_parser_transform]*: Log when regex does not match (#618 ([0098034][url.commit_009803467f4513827abbe4a28d8170a5593ea2c5])
* *[`tokenizer` transform][docs.tokenizer_transform]*: Convert "-" into "nil" ([#580][url.pr_580])

### Performance Improvements

#### Core performance improvements

* *[observability][docs.monitoring]*: Add initial rework of rate limited logs ([#778][url.pr_778])

### Bug Fixes

#### Core bug fixes

* *[config][docs.configuration]*: Reload with unparseable config ([#752][url.pr_752])
* *[log data model][docs.log]*: Unflatten event before outputting ([#678][url.pr_678])
* *[log data model][docs.log]*: Don't serialize mapvalue::null as a string ([#725][url.pr_725])
* *networking*: Retry requests on timeouts ([#691][url.pr_691])
* *operations*: Use gnu ld instead of llvm lld for x86_64-unknown-linux-musl ([#794][url.pr_794])
* *operations*: Fix docker nightly builds ([#830][url.pr_830])
* *security*: Rustsec-2019-0011 by updating crossbeam-epoch ([#723][url.pr_723])
* *topology*: It is now possible to reload a with a non-overlap… ([#681][url.pr_681])

#### Sink bug fixes

* *[`aws_cloudwatch_logs` sink][docs.aws_cloudwatch_logs_sink]*: `encoding = "text"` overrides ([#803][url.pr_803])
* *[`aws_s3` sink][docs.aws_s3_sink]*: Retry httpdispatch errors for s3 and kinesis ([#651][url.pr_651])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Make the headers and query tables optional. ([#831][url.pr_831])
* *[`prometheus` sink][docs.prometheus_sink]*: Update metric::set usage ([#756][url.pr_756])

## Updating

Please see the [updating docs][docs.updating] to update for your specific platform.

## Contributors

Thank you to all of our contributors:

* Alexander Rodin
* Alexey Suslov
* Andy Georges
* Ayhan
* Ben Johnson
* Binary Logic
* Bittrance
* Brian Kabiro
* Bruce Guenter
* Cédric Da Fonseca
* Denis Andrejew
* Jesse Szwedko
* Kirill Taran
* Lucio Franco
* Luke Steensen
* Markus Holtermann
* Matthias Endler
* apjones-proton
* ktff
---

<p align="center">
  Developed with ❤️ by <strong><a href="https://timber.io">Timber.io</a></strong>
</p>